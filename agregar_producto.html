<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agregar Producto</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

    <link rel="stylesheet" href="assests/style.css">
    
</head>
<body>

        <nav class="nav-admin"> 
            <div class="contenedor-navbar-admin">

                <div class="contenedor-titulo-navbar-admin">
                    <img src="assests/img/logo-huerto-hogar.png" alt="logo empresa">
                </div>

                <div class="contenedor-enlaces-admin">
                    <div class="container-fluid-admin">
                        <a href="home_admin.html"><img src="assests/img/barra-navegacion/logo-home.png" alt="home">Inicio</a>
                    </div>

                    <div class="container-fluid-admin">
                        <a href="listado_usuarios_admin.html"><img src="assests/img/barra-navegacion/logo-usuario.png" alt="usuario">Usuarios</a>
                    </div>

                    <div class="container-fluid-admin">
                        <a href="listado_productos_admin.html"><img src="assests/img/barra-navegacion/logo-producto.png" alt="productos">Productos</a>
                    </div>

                </div>


            </div>
        </nav>

        <main class="main-admin form-producto">
            <h2>Agregar Producto</h2>
            <form id="formProducto">
                <div class="mb-3">
                    <label for="nombre" class="form-label">Nombre del producto</label>
                    <input type="text" class="form-control" id="nombre" required>
                </div>

                <div class="mb-3">
                    <label for="categoria" class="form-label">Categoría</label>
                    <select id="categoria" class="form-select" required>
                        <option value="">Seleccione...</option>
                        <option value="Frutas Frescas">Frutas Frescas</option>
                        <option value="Verduras Orgánicas">Verduras Orgánicas</option>
                        <option value="Productos Orgánicos">Productos Orgánicos</option>
                        <option value="Productos Lácteos">Productos Lácteos</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label for="precio" class="form-label">Precio</label>
                    <input type="number" class="form-control" id="precio" min="0" required>
                </div>

                <div class="mb-3">
                    <label for="stock" class="form-label">Stock</label>
                    <input type="number" class="form-control" id="stock" min="0" required>
                </div>

                <button type="submit" class="btn-agregar-producto">Guardar Producto</button>
                <a href="listado_productos_admin.html" class="btn-volver">Volver</a>
            </form>
        </main>


        <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
        <script src="funciones.js"></script>

        <script>
            $("#formProducto").on("submit", function(e) {
                e.preventDefault();

                const categoria = $("#categoria").val()
                const id = generarIdProducto(categoria)

                const producto = {
                    id,
                    nombre: $("#nombre").val(),
                    categoria,
                    precio: $("#precio").val(),
                    stock: $("#stock").val(),
                };

                //Recupera productos desde localStorage (o arreglo inicial si está vacío)
                let productos = JSON.parse(localStorage.getItem("productos")) || [];
                productos.push(producto);

                // Guarda el nuevo arreglo en localStorage
                localStorage.setItem("productos", JSON.stringify(productos));

                alert("✅ Producto agregado correctamente");
                window.location.href = "listado_productos_admin.html";
            });
        </script>

</body>
</html>